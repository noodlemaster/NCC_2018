!function($,n,i){"use strict";var e=n.Modernizr,t=$("body");$.DLMenu=function(n,i){this.$el=$(i),this._init(n)},$.DLMenu.defaults={animationClasses:{classin:"dl-animate-in-2",classout:"dl-animate-out-2"},onLevelClick:function(n,i){return!1},onLinkClick:function(n,i){return!1}},$.DLMenu.prototype={_init:function(n){this.options=$.extend(!0,{},$.DLMenu.defaults,n),this._config();var i={WebkitAnimation:"webkitAnimationEnd",OAnimation:"oAnimationEnd",msAnimation:"MSAnimationEnd",animation:"animationend"},t={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd",msTransition:"MSTransitionEnd",transition:"transitionend"};this.animEndEventName=i[e.prefixed("animation")]+".dlmenu",this.transEndEventName=t[e.prefixed("transition")]+".dlmenu",this.supportAnimations=e.cssanimations,this.supportTransitions=e.csstransitions,this._initEvents()},_config:function(){this.open=!1,this.$trigger=$(".nav--secondary__control"),this.$menu=this.$el.children(".mobile-menu nav ul.menu"),this.$menuitems=this.$menu.find("li:not(.dl-back)"),this.$el.find("ul.dropdown-menu").prepend('<li class="dl-back"><a href="#">back</a></li>'),this.$back=this.$menu.find("li.dl-back")},_initEvents:function(){var n=this;this.$trigger.on("click.dlmenu",function(){return n.open?n._closeMenu():n._openMenu(),!1}),this.$menuitems.on("click.dlmenu",function(i){i.stopPropagation();var e=$(this),t=e.children("ul.dropdown-menu");if(t.length>0){var s=t.clone().css("opacity",0).insertAfter(n.$menu),o=function(){n.$menu.off(n.animEndEventName).removeClass(n.options.animationClasses.classout).addClass("dl-subview"),e.addClass("dl-subviewopen").parents(".dl-subviewopen:first").removeClass("dl-subviewopen").addClass("dl-subview"),s.remove()};return setTimeout(function(){s.addClass(n.options.animationClasses.classin),n.$menu.addClass(n.options.animationClasses.classout),n.supportAnimations?n.$menu.on(n.animEndEventName,o):o.call(),n.options.onLevelClick(e,e.children("a:first").text())}),!1}n.options.onLinkClick(e,i)}),this.$back.on("click.dlmenu",function(i){var e=$(this),t=e.parents("ul.dropdown-menu"),s=t.parent(),o=t.clone().insertAfter(n.$menu),a=function(){n.$menu.off(n.animEndEventName).removeClass(n.options.animationClasses.classin),o.remove()};return setTimeout(function(){o.addClass(n.options.animationClasses.classout),n.$menu.addClass(n.options.animationClasses.classin),n.supportAnimations?n.$menu.on(n.animEndEventName,a):a.call(),s.removeClass("dl-subviewopen");var i=e.parents(".dl-subview:first");i.is("li")&&i.addClass("dl-subviewopen"),i.removeClass("dl-subview")}),!1})},closeMenu:function(){this.open&&this._closeMenu()},_closeMenu:function(){var n=this,i=function(){n.$menu.off(n.transEndEventName),n._resetMenu()};this.$menu.removeClass("dl-menuopen"),this.$menu.addClass("dl-menu-toggle"),this.$trigger.removeClass("dl-active"),this.supportTransitions?this.$menu.on(this.transEndEventName,i):i.call(),this.open=!1},openMenu:function(){this.open||this._openMenu()},_openMenu:function(){var n=this;t.off("click").on("click.dlmenu",function(){n._closeMenu()}),this.$menu.addClass("dl-menuopen dl-menu-toggle").on(this.transEndEventName,function(){$(this).removeClass("dl-menu-toggle")}),this.$trigger.addClass("dl-active"),this.open=!0},_resetMenu:function(){this.$menu.removeClass("dl-subview"),this.$menuitems.removeClass("dl-subview dl-subviewopen")}};var s=function(i){n.console&&n.console.error(i)};$.fn.dlmenu=function(n){if("string"==typeof n){var i=Array.prototype.slice.call(arguments,1);this.each(function(){var e=$.data(this,"dlmenu");return e?$.isFunction(e[n])&&"_"!==n.charAt(0)?void e[n].apply(e,i):void s("no such method '"+n+"' for dlmenu instance"):void s("cannot call methods on dlmenu prior to initialization; attempted to call method '"+n+"'")})}else this.each(function(){var i=$.data(this,"dlmenu");i?i._init():i=$.data(this,"dlmenu",new $.DLMenu(n,this))});return this}}(jQuery,window);