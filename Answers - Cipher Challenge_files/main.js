!function(){function a(a,t){t=t||{bubbles:!1,cancelable:!1,detail:void 0};var n=document.createEvent("CustomEvent");return n.initCustomEvent(a,t.bubbles,t.cancelable,t.detail),n}return"function"!=typeof window.CustomEvent&&(console.log("hi"),a.prototype=window.Event.prototype,void(window.CustomEvent=a))}();var MalinkyAjaxPaging=function($){var init=function(mapVars){function debounce(a,t,n){var o;return function(){var i=this,e=arguments,p=function(){o=null,n||a.apply(i,e)},m=n&&!o;clearTimeout(o),o=setTimeout(p,t),m&&a.apply(i,e)}}var mymapAjaxLoader=mapVars.mapAjaxLoader,mymapCssLoadMore=mapVars.mapCssLoadMore,mymapCssLoadMoreButton=mapVars.mapCssLoadMoreButton,mymapInfiniteScrollBuffer=mapVars.mapInfiniteScrollBuffer,mymapLoadingTimer="",mymapLoadingMorePostsText=mapVars.mapLoadingMorePostsText,mymapLoadMoreButtonText=mapVars.mapLoadMoreButtonText,mymapPaginationClass=mapVars.mapPaginationClass,mymapPaginationClassPixelsToDocBottom=mapVars.mapPaginationClassPixelsToDocBottom,mymapPagingType=mapVars.mapPagingType,mymapPostsWrapperClass=mapVars.mapPostsWrapperClass,mymapPostClass=mapVars.mapPostClass,mymapNextPageSelector=mapVars.mapNextPageSelector,mymapNextPageUrl=mapVars.mapNextPageUrl,mymapPaginatorCount=mapVars.mapPaginatorCount,mymapUserCallback=mapVars.mapUserCallback,infiniteScrollRunning=!1,mapLoadPosts=function(){$.ajax({type:"GET",url:mymapNextPageUrl,dataType:"html",beforeSend:function(){var a=new CustomEvent("malinkyLoadPostsStart");document.dispatchEvent(a)},success:function(a){var t=$.parseHTML(a),n=($(t).find(mymapPostsWrapperClass),mapPaginatorTotalCount(t));mapAddPaginatorCount(t,n);var o=$(t).find(mymapPostsWrapperClass+'[data-paginator-count="'+mymapPaginatorCount+'"] '+mymapPostClass),i=$(mymapPostsWrapperClass+'[data-paginator-count="'+mymapPaginatorCount+'"] '+mymapPostClass).last(),e=$(mymapPostsWrapperClass+'[data-paginator-count="'+mymapPaginatorCount+'"] '+mymapPostClass);if(i.after(o),"infinite-scroll"!=mymapPagingType&&"load-more"!=mymapPagingType||(1==n?mapIsLastPage(t,mymapNextPageSelector)?mymapNextPageUrl=$(t).find(mymapNextPageSelector).attr("href"):($('#malinky-ajax-pagination-button[data-paginator-count="'+mymapPaginatorCount+'"]').parent().remove(),window.removeEventListener("scroll",mapInfiniteScroll)):mapIsLastPage(t,mymapNextPageSelector+'[data-paginator-count="'+mymapPaginatorCount+'"]')?mymapNextPageUrl=$(t).find(mymapNextPageSelector+'[data-paginator-count="'+mymapPaginatorCount+'"]').attr("href"):($('#malinky-ajax-pagination-button[data-paginator-count="'+mymapPaginatorCount+'"]').parent().remove(),window.removeEventListener("scroll",mapInfiniteScroll))),"pagination"==mymapPagingType){e.remove(),history.pushState(null,null,mymapNextPageUrl);var p=$(t).find(mymapPaginationClass+'[data-paginator-count="'+mymapPaginatorCount+'"]').first();$(mymapPaginationClass+'[data-paginator-count="'+mymapPaginatorCount+'"]').replaceWith(p)}mapLoaded()},error:function(a,t){mapFailed()},complete:function(requestObj){var malinkyloadPostsCompleteEvent=new CustomEvent("malinkyLoadPostsComplete");document.dispatchEvent(malinkyloadPostsCompleteEvent),"pagination"==mymapPagingType&&$("body,html").animate({scrollTop:$(mymapPostsWrapperClass+'[data-paginator-count="'+mymapPaginatorCount+'"]').offset().top-150},400),"infinite-scroll"==mymapPagingType&&(infiniteScrollRunning=!1),"load-more"==mymapPagingType&&$('#malinky-ajax-pagination-button[data-paginator-count="'+mymapPaginatorCount+'"]').removeClass("malinky-load-more__button-disable");var mapResponse=$.parseHTML(requestObj.responseText),paginatorTotalCountAjax=mapPaginatorTotalCount(mapResponse);mapAddPaginatorCount(mapResponse,paginatorTotalCountAjax);var $mapLoadedPosts=$(mapResponse).find(mymapPostsWrapperClass+'[data-paginator-count="'+mymapPaginatorCount+'"] '+mymapPostClass);!function(loadedPosts,url){eval(mymapUserCallback)}($mapLoadedPosts,this.url)}})},mapPaginatorTotalCount=function(a){var t=0;for(var n in malinkySettings)$(a).find(malinkySettings[n].posts_wrapper).length&&$(a).find(malinkySettings[n].post_wrapper).length&&$(a).find(malinkySettings[n].pagination_wrapper).length&&t++;return t},mapAddPaginatorCount=function(a,t){var n=1;for(var o in malinkySettings)$(a).find(malinkySettings[o].posts_wrapper).length&&$(a).find(malinkySettings[o].post_wrapper).length&&$(a).find(malinkySettings[o].pagination_wrapper).length&&(1==t?($(a).find(malinkySettings[o].posts_wrapper).attr("data-paginator-count",n),$(a).find(malinkySettings[o].pagination_wrapper).attr("data-paginator-count",n)):($(a).find(malinkySettings[o].posts_wrapper).attr("data-paginator-count",n),$(a).find(malinkySettings[o].posts_wrapper+" "+malinkySettings[o].pagination_wrapper).attr("data-paginator-count",n),$(a).find(malinkySettings[o].posts_wrapper+" "+malinkySettings[o].next_page_selector).attr("data-paginator-count",n),n++))},mapIsLastPage=function(a,t){return $(a).find(t).length},mapAddLoader=function(){$(mymapPaginationClass+'[data-paginator-count="'+mymapPaginatorCount+'"]').last().before('<div class="malinky-ajax-pagination-loading" data-paginator-count="'+mymapPaginatorCount+'">'+mymapAjaxLoader+"</div>")},mapLoading=function(){$('.malinky-ajax-pagination-loading[data-paginator-count="'+mymapPaginatorCount+'"]').show(),"load-more"!=mymapPagingType&&"infinite-scroll"!=mymapPagingType||$('#malinky-ajax-pagination-button[data-paginator-count="'+mymapPaginatorCount+'"]').text(mymapLoadingMorePostsText)},mapLoaded=function(){$('.malinky-ajax-pagination-loading[data-paginator-count="'+mymapPaginatorCount+'"]').hide(),"load-more"!=mymapPagingType&&"infinite-scroll"!=mymapPagingType||$('#malinky-ajax-pagination-button[data-paginator-count="'+mymapPaginatorCount+'"]').text(mymapLoadMoreButtonText),clearTimeout(mymapLoadingTimer)},mapFailed=function(){$('.malinky-ajax-pagination-loading[data-paginator-count="'+mymapPaginatorCount+'"]').hide(),clearTimeout(mymapLoadingTimer)},mapInfiniteScroll=debounce(function(){if(!infiniteScrollRunning){var a=($(document).height()-$(window).scrollTop()-$(window).height(),$(mymapPostsWrapperClass+'[data-paginator-count="'+mymapPaginatorCount+'"]').offset().top),t=$(mymapPostsWrapperClass+'[data-paginator-count="'+mymapPaginatorCount+'"]').outerHeight();$(window).height()+$(window).scrollTop()+mymapInfiniteScrollBuffer>a+t&&(infiniteScrollRunning=!0,mapLoading(),mapLoadPosts())}},250);"infinite-scroll"==mymapPagingType?$(mymapNextPageSelector+'[data-paginator-count="'+mymapPaginatorCount+'"]').attr("href")&&(mapAddLoader(),$(mymapPaginationClass+'[data-paginator-count="'+mymapPaginatorCount+'"]').remove(),window.addEventListener("scroll",mapInfiniteScroll)):"load-more"==mymapPagingType?$(mymapNextPageSelector+'[data-paginator-count="'+mymapPaginatorCount+'"]').attr("href")&&($(mymapPaginationClass+'[data-paginator-count="'+mymapPaginatorCount+'"]').last().after('<div class="malinky-load-more"><a href="'+mymapNextPageUrl+'" id="malinky-ajax-pagination-button" class="malinky-load-more__button" data-paginator-count="'+mymapPaginatorCount+'">'+mymapLoadMoreButtonText+"</a></div>"),mapAddLoader(),$(mymapPaginationClass+'[data-paginator-count="'+mymapPaginatorCount+'"]:not(:has(>a#malinky-ajax-pagination-button[data-paginator-count="'+mymapPaginatorCount+'"]))').remove(),$('#malinky-ajax-pagination-button[data-paginator-count="'+mymapPaginatorCount+'"]').click(function(a){a.preventDefault(),$(this).addClass("malinky-load-more__button-disable"),mymapLoadingTimer=setTimeout(mapLoading,750),mapLoadPosts()})):"pagination"==mymapPagingType&&(mapAddLoader(),$(document).on("click",mymapPaginationClass+'[data-paginator-count="'+mymapPaginatorCount+'"] a',function(a){a.preventDefault(),mymapLoadingTimer=setTimeout(mapLoading,750),mymapNextPageUrl=a.currentTarget.href,mapLoadPosts()}),window.addEventListener("popstate",function(a){mymapNextPageUrl=document.URL,mapLoadPosts()}))},setUp=function(){var a=0,t=1,n=0;for(var o in malinkySettings)$(malinkySettings[o].posts_wrapper).length&&$(malinkySettings[o].post_wrapper).length&&$(malinkySettings[o].pagination_wrapper).length&&$(malinkySettings[o].next_page_selector).length&&n++;for(var o in malinkySettings)if($(malinkySettings[o].posts_wrapper).length&&$(malinkySettings[o].post_wrapper).length&&$(malinkySettings[o].pagination_wrapper).length&&$(malinkySettings[o].next_page_selector).length){1==n?($(malinkySettings[o].posts_wrapper).attr("data-paginator-count",t),$(malinkySettings[o].pagination_wrapper).attr("data-paginator-count",t),$(malinkySettings[o].next_page_selector).attr("data-paginator-count",t)):($(malinkySettings[o].posts_wrapper).attr("data-paginator-count",t),$(malinkySettings[o].posts_wrapper+" "+malinkySettings[o].pagination_wrapper).attr("data-paginator-count",t),$(malinkySettings[o].posts_wrapper+" "+malinkySettings[o].next_page_selector).attr("data-paginator-count",t),t++);var i={mapAjaxLoader:malinkySettings[o].ajax_loader,mapCssLoadMore:malinkySettings[o].malinky_load_more,mapCssLoadMoreButton:malinkySettings[o].malinky_load_more_button,mapInfiniteScrollBuffer:parseInt(malinkySettings[o].infinite_scroll_buffer),mapLoadingTimer:"",mapLoadingMorePostsText:malinkySettings[o].loading_more_posts_text,mapLoadMoreButtonText:malinkySettings[o].load_more_button_text,mapPaginationClass:malinkySettings[o].pagination_wrapper,mapPagingType:malinkySettings[o].paging_type,mapPostsWrapperClass:malinkySettings[o].posts_wrapper,mapPostClass:malinkySettings[o].post_wrapper,mapNextPageSelector:malinkySettings[o].next_page_selector,mapPaginatorCount:++a,mapUserCallback:malinkySettings[o].callback_function};i.mapPaginationClassPixelsToDocBottom=jQuery(document).height()-jQuery(i.mapPaginationClass).offset().top,1==n?i.mapNextPageUrl=$(malinkySettings[o].next_page_selector).attr("href"):i.mapNextPageUrl=$(malinkySettings[o].posts_wrapper+" "+malinkySettings[o].next_page_selector).attr("href"),init(i);var e=new CustomEvent("malinkyPaginationInitialized");document.dispatchEvent(e)}};return setUp(),{setUp:setUp}}(jQuery);